<div class="template-results">

    <tabset>
        <tab heading="By Person" active="tabPersonOpen">
            <div ng-controller="ResultsByPersonCtrl">
                <form class="form-inline" role="form" ng-submit="search()">
                   <!-- <div class="form-group">
                        <label class="sr-only" for="inputName">Name</label> -->
                        <input type="text" class="form-control" id="inputName" placeholder="Firstname Lastname" ng-model="name" required>
                   <!-- </div>
                    <div class="form-group">
                        <label class="sr-only" for="yearOfBirth">Year of birth</label> -->
                        <input type="text" class="form-control" size="5" id="yearOfBirth" placeholder="Year of birth" ng-model="yearOfBirth" pattern="([0-9]{2})?\d\d" title="Enter valid year of birth">
                   <!-- </div>
                    <div class="checkbox">
                        <label class="checkbox">-->
                            <input type="checkbox" ng-model="groupByYear">
                           Group by year
                        </label>

                    <input type="text" datepicker-popup="dd.MM.yyyy" ng-model="fromDate" placeholder="From" pattern="\d\d\.\d\d.(\d\d)?\d\d"  title="Enter a valid date" />
                    <input type="text" datepicker-popup="dd.MM.yyyy" ng-model="toDate" placeholder="To" pattern="\d\d\.\d\d.(\d\d)?\d\d" title="Enter a valid date" />
                    <!--</div> -->
                    <button type="submit" class="btn btn-default">Search</button>
                </form>

                <div class="results-list">
                    <div ng-hide="loading">

                        <accordion close-others="false">
                            <accordion-group heading="{{group.title}} ({{group.results.length}})" ng-repeat="group in groups" is-open="group.isOpen">
                                <table class="table table-striped">
                                    <tr>
                                        <th><a href="" ng-click="sort('event.name')">Competition</a></th>
                                        <th><a href="" ng-click="sort('event.date')">Date</a></th>
                                        <th><a href="" ng-click="sort('event.map')">Map</a></th>
                                        <th><a href="" ng-click="sort('category')">Category</a></th>
                                        <th><a href="" ng-click="sort('rank')">Rank</a></th>
                                    </tr>

                                    <tr ng-repeat="result in group.results  | orderBy:sortField">
                                        <td>
                                            <a href="{{result.event.url}}">
                                                {{result.event.name}}
                                                <span ng-hide="result.event.name">
                                                    {{result.event.url}}
                                                </span>
                                            </a>
                                        </td>
                                        <td>{{result.event.date | date:'mediumDate'}}</td>
                                        <td>{{result.event.map}}</td>
                                        <td>{{result.category}}</td>
                                        <td>{{result.rank}}</td>
                                    </tr>
                                </table>
                            </accordion-group>
                        </accordion>


                    </div>
                    <div ng-show="loading">
                        Loading data...
                    </div>
                </div>

            </div>

        </tab>
        <tab heading="By Category" active="tabCategoryOpen">
            <div ng-controller="ResultsByCategoryCtrl">
                <form class="form-inline" role="form" ng-submit="search()">
                    <!-- <div class="form-group">
                         <label class="sr-only" for="inputName">Name</label> -->
                    <input type="text" class="form-control" id="inputCategory" placeholder="Enter category" ng-model="category" required>
                    <!-- </div>
                     <div class="form-group">
                         <label class="sr-only" for="yearOfBirth">Year of birth</label> -->

                    <!-- </div>
                     <div class="checkbox">
                         <label class="checkbox">-->
                    <input type="checkbox" ng-model="groupByYear">
                    Group by year
                    </label>

                    <input type="text" datepicker-popup="dd.MM.yyyy" ng-model="fromDate" placeholder="From" pattern="\d\d\.\d\d.(\d\d)?\d\d"  title="Enter a valid date" />
                    <input type="text" datepicker-popup="dd.MM.yyyy" ng-model="toDate" placeholder="To" pattern="\d\d\.\d\d.(\d\d)?\d\d" title="Enter a valid date" />
                    <!--</div> -->
                    <button type="submit" class="btn btn-default">Search</button>
                </form>

                <div class="results-list">
                    <div ng-hide="loading">

                        <accordion close-others="false">
                            <accordion-group heading="{{group.title}} ({{group.persons.length}})" ng-repeat="group in groups" is-open="group.isOpen">
                                <table class="table table-striped">
                                    <tr>
                                        <th><a href="" ng-click="sort('name')">Name</a></th>
                                        <th><a href="" ng-click="sort('yearOfBirth')">Year of birth</a></th>
                                        <th><a href="" ng-click="sort('victories')">Victories</a></th>
                                        <th><a href="" ng-click="sort('podiums')">Podiums</a></th>
                                        <th><a href="" ng-click="sort('counts')">Participations</a></th>
                                    </tr>

                                    <tr ng-repeat="person in group.persons  | orderBy:sortField">
                                        <td>
                                            <a  ng-click="openPerson(person.name)" >
                                                {{person.name}}
                                            </a>
                                        </td>
                                        <td>{{person.yearOfBirth}}</td>
                                        <td>{{person.victories}}</td>
                                        <td>{{person.podiums}}</td>
                                        <td>{{person.counts}}</td>
                                    </tr>
                                </table>
                            </accordion-group>
                        </accordion>


                    </div>
                    <div ng-show="loading">
                        Loading data...
                    </div>
                </div>

            </div>

        </tab>
    </tabset>
</div>